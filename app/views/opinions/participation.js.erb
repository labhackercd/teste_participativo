var position = '<%= "#{params[:position]}" %>',
    el = position + "<%= "-#{params[:opinion_id]}" %>";

var button = $("#"+el),
    button_class = button.attr('class');

<<<<<<< HEAD
=======

>>>>>>> a Bunch of Small Things (WIP)
var n = [];

button.closest('.position').children().each(function() {
  var prevalue = $(this).find('.n').html();
  if (prevalue === '')
    prevalue = 0;
  else prevalue = parseInt(prevalue);
  n.push(prevalue);

  if ($(this).find('i').is('.up, .down, .prop')) {
    $(this).find('.n').html(function() {
      var value = parseInt($(this).html());
      value--;
      if (value === 0)
        return('');
      else return(value);
    });
  }

});


if (button.is('.up, .down, .prop')) {

  button.removeClass('up down prop');
} else {
  button.closest('.position').find('i').attr('class', function(e) {
    $(this).removeClass("up down prop");
  });
  if (position === 'up') {
    button.addClass('up');
    button.parent().find('.n').html(n[0] + 1);
  }
  else if (position === 'down') {
      debugger;
    button.addClass('down');
    button.parent().find('.n').html(n[1] + 1);
  }
  else {
      debugger;
    button.addClass('prop');
    button.parent().find('.n').html(n[2] + 1);
  }
}
